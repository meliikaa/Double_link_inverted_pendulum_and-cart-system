%% observer
C
A
AT=transpose(A)
B=transpose(C)
F = [0 1 0 0 0 0;0 0 1 0 0 0;0 0 0 1 0 0;0 0 0 0 1 0;0 0 0 0 0 1;-180000 -126000 -63550 -13465 -1309 -59]
K_bar = [1 0 0 0 0 0;1 0 0 0 0 0]
P=lyap(AT,-F,-B.*K_bar)
K = K_bar*inv(P)
L=transpose(K)
%% observer with lower 
q=rank(C)
F2 = [-1 2 0 0;-2 -1 0 0;0 0 -10 0;0 0 0 -15]
L2= [0 0;1 1;1 0;0 1]
rank(ctrb(F2,L2))
T=lyap(-F2,A,-L2*C)
final =[0,0,1,0,0,0;0,0,0,0,1,0;0,0,0.0363,-0.0011,0.0282,-0.0008;0,0,-0.0154,0.0176,-0.0120,0.0137;0,0,0.1061,-0.0106,0.1083,-0.0108;0,0,0.1576,-0.0105,-0.0154,0.0010]
det(final)
%% retry
q=rank(C)
F2 = [-1 2 0 0;-2 -1 0 0;0 0 -10 0;0 0 0 -15]
L2= [0 0;1 1;1 1;0 1]
rank(ctrb(F2,L2))
T=lyap(-F2,A,-L2*C)
final=[C;T]
det(final)